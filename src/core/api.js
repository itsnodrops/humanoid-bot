const _0x3fcee9 = _0x21e5; (function (_0x27c624, _0x3dd26c) { const _0x435d2b = _0x21e5, _0x12c072 = _0x27c624(); while (!![]) { try { const _0x3d14b0 = parseInt(_0x435d2b(0x1d2)) / 0x1 + parseInt(_0x435d2b(0x1ba)) / 0x2 + parseInt(_0x435d2b(0x1e4)) / 0x3 * (-parseInt(_0x435d2b(0x1c5)) / 0x4) + -parseInt(_0x435d2b(0x1c0)) / 0x5 + parseInt(_0x435d2b(0x1c8)) / 0x6 * (parseInt(_0x435d2b(0x1df)) / 0x7) + parseInt(_0x435d2b(0x1d0)) / 0x8 * (parseInt(_0x435d2b(0x1bf)) / 0x9) + -parseInt(_0x435d2b(0x1e1)) / 0xa; if (_0x3d14b0 === _0x3dd26c) break; else _0x12c072['push'](_0x12c072['shift']()); } catch (_0x315832) { _0x12c072['push'](_0x12c072['shift']()); } } }(_0x5667, 0xa7830)); function _0x21e5(_0x3a7e42, _0x29fcde) { _0x3a7e42 = _0x3a7e42 - 0x1b2; const _0x5667fd = _0x5667(); let _0x21e526 = _0x5667fd[_0x3a7e42]; return _0x21e526; } import { proxyManager, generateAuthPayload, fetch } from '../utils/helper.js'; import _0x2565f2 from '../utils/logger.js'; import _0x3ef5c1 from 'user-agents'; import { accountsCache } from './cache.js'; const DEFAULTS = { 'REF_CODE': _0x3fcee9(0x1b8), 'BASE_API': 'https://prelaunch.humanoidnetwork.org', 'HF_API': 'https://huggingface.co' }; let config = DEFAULTS; try { const configModule = await import('../../config.js'); config = { ...DEFAULTS, ...configModule[_0x3fcee9(0x1b5)] }; } catch { } function getUserAgent(_0x12f3c4) { const _0xb8c01a = _0x3fcee9; if (!_0x12f3c4) return new _0x3ef5c1()[_0xb8c01a(0x1bc)](); let _0x3bb380 = accountsCache[_0xb8c01a(0x1d8)](_0x12f3c4); return !_0x3bb380 && (_0x3bb380 = new _0x3ef5c1()[_0xb8c01a(0x1bc)](), accountsCache[_0xb8c01a(0x1e5)](_0x12f3c4, _0x3bb380)), _0x3bb380; } function _0x5667() { const _0x1d3b61 = ['Set\x20X\x20Username\x20Failed', 'getTaskList', 'Training', 'hfUrl', 'getDatasets', 'default', 'getModels', 'scrapeHuggingFace', 'TBE3HD', '?limit=', '2308196WkSUUH', '\x20from\x20HuggingFace', 'toString', '\x20\x20\x20Status', 'HTTP\x20', '740529FFfRlU', '3895775NMHxBO', 'GET', 'baseUrl', 'json', 'Failed\x20to\x20scrape\x20', '8ROjIZL', 'HF_API', 'request', '6qbrmmA', 'stringify', '/api/user/update-x-username', 'sleep', 'POST', 'error', 'Failed\x20to\x20fetch\x20tasks\x20data', 'Failed\x20to\x20fetch\x20user\x20data', '64MHEkcr', 'length', '42452mFWCNF', 'authenticate', 'keys', '/api/referral/apply', '*/*', 'message', 'getUserAgent', 'createHeaders', '/api/tasks', 'applyReferral', '/api/user', '/api/training', 'Failed\x20to\x20fetch\x20progress\x20data', '2082290LvRcyS', 'en-US,en;q=0.9', '5213990jbqzgC', 'body', 'createAgent', '248379dETlnE', 'setUserAgent', 'getNonce', 'submitTraining', 'data', 'Status', 'status', 'datasets', 'Bearer\x20']; _0x5667 = function () { return _0x1d3b61; }; return _0x5667(); } class ApiService { constructor() { const _0x510a56 = _0x3fcee9; this['baseUrl'] = config['BASE_API'], this[_0x510a56(0x1b3)] = config[_0x510a56(0x1c6)]; } [_0x3fcee9(0x1d9)](_0x5f10f0, _0x157837 = null) { const _0x5a7665 = _0x3fcee9, _0x4ca8f1 = { 'Accept': _0x5a7665(0x1d6), 'Accept-Language': _0x5a7665(0x1e0), 'Content-Type': 'application/json', 'Origin': this[_0x5a7665(0x1c2)], 'Referer': this['baseUrl'] + '/', 'User-Agent': getUserAgent(_0x5f10f0) }; if (_0x157837) _0x4ca8f1['Authorization'] = _0x5a7665(0x1ec) + _0x157837; return _0x4ca8f1; } async['request'](_0xaa342, _0x3affb4, _0x3ff07e = {}) { const _0x5c2c03 = _0x3fcee9, { body: body = null, token: token = null, address: address = null, proxyUrl: proxyUrl = null, retries: retries = 0x5, baseUrl: baseUrl = this[_0x5c2c03(0x1c2)] } = _0x3ff07e, _0x41e3ca = '' + baseUrl + _0x3affb4, _0x3814ee = baseUrl === this['baseUrl'] ? this[_0x5c2c03(0x1d9)](address, token) : {}, _0x5de03e = proxyManager[_0x5c2c03(0x1e3)](proxyUrl); for (let _0x44817a = 0x0; _0x44817a < retries; _0x44817a++) { try { const _0x3f03b6 = { 'method': _0xaa342, 'headers': Object[_0x5c2c03(0x1d4)](_0x3814ee)[_0x5c2c03(0x1d1)] ? _0x3814ee : undefined, 'agent': _0x5de03e, 'signal': AbortSignal['timeout'](0xea60) }; if (body) _0x3f03b6[_0x5c2c03(0x1e2)] = JSON[_0x5c2c03(0x1c9)](body); const _0x4a5a1c = await fetch(_0x41e3ca, _0x3f03b6); if (_0x4a5a1c[_0x5c2c03(0x1ea)] === 0x190) return { 'status': 0x190, 'data': null }; if (!_0x4a5a1c['ok']) throw new Error(_0x5c2c03(0x1be) + _0x4a5a1c['status']); return { 'status': _0x4a5a1c['status'], 'data': await _0x4a5a1c[_0x5c2c03(0x1c3)]() }; } catch (_0x5ecb94) { if (_0x44817a < retries - 0x1) { await this[_0x5c2c03(0x1cb)](0x1388); continue; } throw _0x5ecb94; } } } async[_0x3fcee9(0x1e6)](_0x39f566, _0x14a178 = null) { const _0x14c664 = _0x3fcee9; try { const _0x40f2b6 = await this[_0x14c664(0x1c7)](_0x14c664(0x1cc), '/api/auth/nonce', { 'body': { 'walletAddress': _0x39f566 }, 'address': _0x39f566, 'proxyUrl': _0x14a178 }); return _0x40f2b6[_0x14c664(0x1e8)]; } catch (_0x52d9d9) { return _0x2565f2[_0x14c664(0x1cd)](_0x14c664(0x1e9), 'Fetch\x20Nonce\x20Failed', _0x52d9d9[_0x14c664(0x1d7)]), null; } } async[_0x3fcee9(0x1d3)](_0x2202fa, _0x15078f, _0x5dd997, _0xc965d1 = null) { const _0x26ee4f = _0x3fcee9; try { const _0x39e07a = await generateAuthPayload(_0x2202fa, _0x15078f, _0x5dd997), _0x1accdf = await this[_0x26ee4f(0x1c7)](_0x26ee4f(0x1cc), '/api/auth/authenticate', { 'body': _0x39e07a, 'address': _0x15078f, 'proxyUrl': _0xc965d1 }); return _0x1accdf[_0x26ee4f(0x1e8)]; } catch (_0x22658c) { return _0x2565f2['error'](_0x26ee4f(0x1e9), 'Login\x20Failed', _0x22658c[_0x26ee4f(0x1d7)]), null; } } async['getUserData'](_0x952d04, _0x5b4525, _0x333e61 = null) { const _0x5e0011 = _0x3fcee9; try { const _0x52d91c = await this[_0x5e0011(0x1c7)](_0x5e0011(0x1c1), _0x5e0011(0x1dc), { 'token': _0x5b4525, 'address': _0x952d04, 'proxyUrl': _0x333e61 }); return _0x52d91c['data']; } catch (_0x351cbb) { return _0x2565f2['error'](_0x5e0011(0x1e9), _0x5e0011(0x1cf), _0x351cbb[_0x5e0011(0x1d7)]), null; } } async[_0x3fcee9(0x1db)](_0x3c00d0, _0x1d242a, _0x26ffe0, _0x178776 = null) { const _0x46a50a = _0x3fcee9; try { const _0x339c3e = await this[_0x46a50a(0x1c7)]('POST', _0x46a50a(0x1d5), { 'body': { 'referralCode': _0x26ffe0 }, 'token': _0x1d242a, 'address': _0x3c00d0, 'proxyUrl': _0x178776 }); return _0x339c3e[_0x46a50a(0x1ea)] !== 0x190 ? _0x339c3e[_0x46a50a(0x1e8)] : null; } catch (_0x14c52c) { return _0x2565f2[_0x46a50a(0x1cd)]('Status', 'Apply\x20Ref\x20Failed', _0x14c52c[_0x46a50a(0x1d7)]), null; } } async['setXUsername'](_0x5d7f14, _0x1f1adf, _0x2e415e, _0x447390 = null) { const _0x169b6d = _0x3fcee9; try { const _0x259e1d = await this[_0x169b6d(0x1c7)](_0x169b6d(0x1cc), _0x169b6d(0x1ca), { 'body': { 'twitterUsername': _0x2e415e }, 'token': _0x1f1adf, 'address': _0x5d7f14, 'proxyUrl': _0x447390 }); return _0x259e1d[_0x169b6d(0x1e8)]; } catch (_0x8d115d) { return _0x2565f2[_0x169b6d(0x1cd)](_0x169b6d(0x1e9), _0x169b6d(0x1ed), _0x8d115d[_0x169b6d(0x1d7)]), null; } } async['getTrainingProgress'](_0x757b6f, _0x29a29f, _0x50b8ea = null) { const _0x4c4f2c = _0x3fcee9; try { const _0x5a1d3f = await this[_0x4c4f2c(0x1c7)](_0x4c4f2c(0x1c1), '/api/training/progress', { 'token': _0x29a29f, 'address': _0x757b6f, 'proxyUrl': _0x50b8ea }); return _0x5a1d3f[_0x4c4f2c(0x1e8)]; } catch (_0x4d593a) { return _0x2565f2[_0x4c4f2c(0x1cd)](_0x4c4f2c(0x1b2), _0x4c4f2c(0x1de), _0x4d593a['message']), null; } } async[_0x3fcee9(0x1e7)](_0x4c1ba6, _0x3e6aec, _0x116546, _0x1723e1 = null) { const _0x796198 = _0x3fcee9; try { const _0x2be110 = await this[_0x796198(0x1c7)](_0x796198(0x1cc), _0x796198(0x1dd), { 'body': _0x116546, 'token': _0x3e6aec, 'address': _0x4c1ba6, 'proxyUrl': _0x1723e1 }); return _0x2be110[_0x796198(0x1e8)]; } catch (_0x1965ae) { return _0x2565f2[_0x796198(0x1cd)](_0x796198(0x1bd), 'Submit\x20Failed', _0x1965ae['message']), null; } } async[_0x3fcee9(0x1ee)](_0x137fc9, _0x4fa23c, _0x28e33f = null) { const _0x1d9e92 = _0x3fcee9; try { const _0x54d418 = await this['request'](_0x1d9e92(0x1c1), '/api/tasks', { 'token': _0x4fa23c, 'address': _0x137fc9, 'proxyUrl': _0x28e33f }); return _0x54d418[_0x1d9e92(0x1e8)]; } catch (_0x12d218) { return _0x2565f2[_0x1d9e92(0x1cd)]('Tasks', _0x1d9e92(0x1ce), _0x12d218['message']), null; } } async['completeTask'](_0x22c0ac, _0x1c0567, _0x2d7291, _0x2e7af1, _0x55519a = null) { const _0x3f7f50 = _0x3fcee9; try { const _0x58795d = await this[_0x3f7f50(0x1c7)](_0x3f7f50(0x1cc), _0x3f7f50(0x1da), { 'body': { 'taskId': _0x2d7291, 'data': _0x2e7af1 }, 'token': _0x1c0567, 'address': _0x22c0ac, 'proxyUrl': _0x55519a }); return _0x58795d['status'] !== 0x190 ? _0x58795d['data'] : ![]; } catch { return null; } } async[_0x3fcee9(0x1b7)](_0xf92c5f, _0x48a2c8, _0x952a31 = null) { const _0x31c60e = _0x3fcee9; try { const _0x48c866 = await this['request'](_0x31c60e(0x1c1), '/api/' + _0xf92c5f + _0x31c60e(0x1b9) + _0x48a2c8 + '&sort=lastModified&direction=-1', { 'proxyUrl': _0x952a31, 'baseUrl': this[_0x31c60e(0x1b3)] }); return _0x48c866[_0x31c60e(0x1e8)]; } catch (_0x30d168) { return _0x2565f2[_0x31c60e(0x1cd)]('\x20\x20\x20Status', _0x31c60e(0x1c4) + _0xf92c5f + _0x31c60e(0x1bb), _0x30d168[_0x31c60e(0x1d7)]), null; } } async[_0x3fcee9(0x1b6)](_0x536b17, _0xf6ddc7 = null) { const _0x5cd8cd = _0x3fcee9; return this[_0x5cd8cd(0x1b7)]('models', _0x536b17, _0xf6ddc7); } async[_0x3fcee9(0x1b4)](_0x2a37c1, _0x40f086 = null) { const _0x2fa822 = _0x3fcee9; return this[_0x2fa822(0x1b7)](_0x2fa822(0x1eb), _0x2a37c1, _0x40f086); } [_0x3fcee9(0x1cb)](_0x5953d3) { return new Promise(_0x44caea => setTimeout(_0x44caea, _0x5953d3)); } } export default new ApiService();