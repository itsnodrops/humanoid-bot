const _0x580b8b = _0x1628; (function (_0x39df2e, _0x33e2a7) { const _0x9c0f48 = _0x1628, _0x5a2a5e = _0x39df2e(); while (!![]) { try { const _0x5a17ce = parseInt(_0x9c0f48(0x1f3)) / 0x1 * (-parseInt(_0x9c0f48(0x21f)) / 0x2) + parseInt(_0x9c0f48(0x1e7)) / 0x3 * (-parseInt(_0x9c0f48(0x1f0)) / 0x4) + -parseInt(_0x9c0f48(0x20e)) / 0x5 + parseInt(_0x9c0f48(0x1e0)) / 0x6 + parseInt(_0x9c0f48(0x1f7)) / 0x7 + parseInt(_0x9c0f48(0x204)) / 0x8 + -parseInt(_0x9c0f48(0x216)) / 0x9; if (_0x5a17ce === _0x33e2a7) break; else _0x5a2a5e['push'](_0x5a2a5e['shift']()); } catch (_0x3de251) { _0x5a2a5e['push'](_0x5a2a5e['shift']()); } } }(_0x1d27, 0xd1d50)); import 'dotenv/config'; import _0x317c47 from 'fs'; import _0x5203c7 from 'path'; import { fileURLToPath } from 'url'; import { ethers } from 'ethers'; import _0x48aa0b from 'node-fetch'; import { HttpsProxyAgent } from 'https-proxy-agent'; import { SocksProxyAgent } from 'socks-proxy-agent'; const __dirname = _0x5203c7['dirname'](fileURLToPath(import.meta.url)); function parseNumberedEnv(_0x23d703) { const _0xbc5538 = _0x1628, _0x24e7d7 = []; for (const [_0x4d06b6, _0x52a958] of Object['entries'](process['env'])) { if (_0x4d06b6[_0xbc5538(0x1e6)](_0x23d703) && _0x52a958 && _0x52a958[_0xbc5538(0x214)]()) { const _0x499a19 = _0x4d06b6[_0xbc5538(0x220)](new RegExp('^' + _0x23d703 + _0xbc5538(0x1e3))); _0x499a19 && _0x24e7d7['push']({ 'index': parseInt(_0x499a19[0x1]), 'value': _0x52a958[_0xbc5538(0x214)]() }); } } return _0x24e7d7['sort']((_0x4eeca3, _0x38b547) => _0x4eeca3[_0xbc5538(0x1e9)] - _0x38b547[_0xbc5538(0x1e9)])[_0xbc5538(0x21d)](_0x24e248 => _0x24e248['value']); } function parseNumberedEnvWithIndex(_0x179ac7) { const _0x13347d = _0x1628, _0x38bbc6 = new Map(); for (const [_0x4667c0, _0x101689] of Object[_0x13347d(0x1dc)](process[_0x13347d(0x206)])) { if (_0x4667c0[_0x13347d(0x1e6)](_0x179ac7) && _0x101689?.[_0x13347d(0x214)]()) { const _0x2963e6 = _0x4667c0['match'](new RegExp('^' + _0x179ac7 + _0x13347d(0x1e3))); if (_0x2963e6) _0x38bbc6[_0x13347d(0x1dd)](parseInt(_0x2963e6[0x1]), _0x101689[_0x13347d(0x214)]()); } } return _0x38bbc6; } function generateRandomUsername() { const _0x1d6746 = _0x1628, _0x2f6314 = _0x1d6746(0x1f9), _0x1ddd74 = 0x8 + Math[_0x1d6746(0x1ec)](Math[_0x1d6746(0x1e1)]() * 0x5); return Array['from']({ 'length': _0x1ddd74 }, () => _0x2f6314[Math[_0x1d6746(0x1ec)](Math[_0x1d6746(0x1e1)]() * _0x2f6314['length'])])[_0x1d6746(0x1fb)](''); } function _0x1628(_0x9fdb7d, _0x454d30) { _0x9fdb7d = _0x9fdb7d - 0x1d7; const _0x1d271b = _0x1d27(); let _0x162883 = _0x1d271b[_0x9fdb7d]; return _0x162883; } function loadProxies() { const _0x3ad899 = _0x1628, _0x1ed942 = _0x5203c7[_0x3ad899(0x1fb)](__dirname, '..', '..', _0x3ad899(0x1d9)); try { if (!_0x317c47[_0x3ad899(0x1f5)](_0x1ed942)) return []; const _0x3f4aa2 = _0x317c47['readFileSync'](_0x1ed942, _0x3ad899(0x203)); return _0x3f4aa2['split']('\x0a')[_0x3ad899(0x21d)](_0x223599 => _0x223599[_0x3ad899(0x214)]())[_0x3ad899(0x20d)](_0x3411e0 => _0x3411e0 && !_0x3411e0[_0x3ad899(0x1e6)]('#')); } catch { return []; } } export const env = { 'privateKeys': parseNumberedEnv(_0x580b8b(0x1e2)), 'xUsernames': parseNumberedEnvWithIndex('X_'), 'proxies': loadProxies(), get 'useProxy'() { const _0x113230 = _0x580b8b; return this[_0x113230(0x208)][_0x113230(0x1ff)] > 0x0; } }; export { generateRandomUsername }; export function delay(_0x3b4f41) { return new Promise(_0x9ad76e => setTimeout(_0x9ad76e, _0x3b4f41)); } export async function withRetry(_0x4e9c48, _0x53be68 = {}) { const _0x5dbbfe = _0x580b8b, { maxRetries: maxRetries = 0x3, baseDelay: baseDelay = 0xbb8, shouldRetry: shouldRetry = _0x5e0ea6 => !_0x5e0ea6[_0x5dbbfe(0x20b)], onRetry: onRetry = null } = _0x53be68; let _0x151a21, _0x2abd69; for (let _0x5c5c1e = 0x1; _0x5c5c1e <= maxRetries; _0x5c5c1e++) { try { _0x151a21 = await _0x4e9c48(); if (!shouldRetry(_0x151a21)) return _0x151a21; if (_0x5c5c1e === maxRetries) return _0x151a21; onRetry && onRetry(_0x5c5c1e, _0x151a21, baseDelay), await delay(baseDelay); } catch (_0x3eed64) { _0x2abd69 = _0x3eed64; if (_0x5c5c1e === maxRetries) throw _0x3eed64; onRetry && onRetry(_0x5c5c1e, _0x3eed64, baseDelay), await delay(baseDelay); } } if (_0x151a21) return _0x151a21; throw _0x2abd69; } export function getAddress(_0x45a5c5) { const _0x352b88 = _0x580b8b; try { return new ethers[(_0x352b88(0x21b))](_0x45a5c5)['address']; } catch { return null; } } export async function signMessage(_0x571ac7, _0x178d3d) { const _0x5cd911 = _0x580b8b, _0x118ebc = new ethers['Wallet'](_0x571ac7); return _0x118ebc[_0x5cd911(0x1eb)](_0x178d3d); } function _0x1d27() { const _0x4bfe90 = ['acquire', 'url', 'length', 'has', 'release', 'MAX_BLOCK_COUNT', 'utf-8', '4843256cPuvyA', 'getProxyForAccount', 'env', 'noProxyBusy', 'proxies', 'now', 'status', 'success', 'accountProxies', 'filter', '4509295IPgqsU', 'https://api.ipify.org?format=json', 'noProxyWaitQueue', 'find', 'some', 'isBlocked', 'trim', 'timeout', '1115694yRaykB', 'http://', 'message', 'All\x20proxies\x20are\x20blocked', 'checkConnection', 'Wallet', 'busy', 'map', 'every', '82464sipQCJ', 'match', 'https://', 'normalizeProxy', 'proxies.txt', 'blockCount', 'HTTP\x20', 'entries', 'set', 'slice', 'waitQueue', '4584018ZpCown', 'random', 'PK_', '(\x5cd+)$', '...', 'shift', 'startsWith', '10902cjLGfL', 'usageCount', 'index', 'getWorkingProxy', 'signMessage', 'floor', 'proxyIndex', 'blocked', 'createAgent', '328HCDvJr', 'markSuccess', 'noProxyMode', '1USENRG', 'getStats', 'existsSync', 'socks4://', '5985749GJdHxE', 'unknown', 'abcdefghijklmnopqrstuvwxyz0123456789', 'push', 'join', 'rotateProxyForAccount']; _0x1d27 = function () { return _0x4bfe90; }; return _0x1d27(); } export async function generateAuthPayload(_0x1704a6, _0x19afd5, _0x266812) { const _0x33ca41 = await signMessage(_0x1704a6, _0x266812); return { 'walletAddress': _0x19afd5, 'signature': _0x33ca41, 'message': _0x266812 }; } export function maskAddress(_0x5acc9f) { const _0x298770 = _0x580b8b; if (!_0x5acc9f || _0x5acc9f[_0x298770(0x1ff)] < 0xc) return _0x5acc9f; return _0x5acc9f[_0x298770(0x1de)](0x0, 0x6) + '******' + _0x5acc9f[_0x298770(0x1de)](-0x6); } export function shortenAddress(_0x1ab75a) { const _0x4d1b55 = _0x580b8b; if (!_0x1ab75a) return _0x4d1b55(0x1f8); return _0x1ab75a[_0x4d1b55(0x1de)](0x0, 0x6) + _0x4d1b55(0x1e4) + _0x1ab75a[_0x4d1b55(0x1de)](-0x4); } export function normalizeProxy(_0x553b53) { const _0x25c2ec = _0x580b8b, _0x4cb7b2 = [_0x25c2ec(0x217), _0x25c2ec(0x1d7), _0x25c2ec(0x1f6), 'socks5://']; return _0x4cb7b2[_0x25c2ec(0x212)](_0x293e8f => _0x553b53[_0x25c2ec(0x1e6)](_0x293e8f)) ? _0x553b53 : _0x25c2ec(0x217) + _0x553b53; } export function createProxyAgent(_0x36ec66) { const _0x35c6a2 = _0x580b8b; if (!_0x36ec66) return null; return _0x36ec66[_0x35c6a2(0x1e6)]('socks') ? new SocksProxyAgent(_0x36ec66) : new HttpsProxyAgent(_0x36ec66); } export async function checkProxy(_0x37dfe0) { const _0x184abb = _0x580b8b, _0x1dbbbf = Date[_0x184abb(0x209)](); try { const _0x199881 = createProxyAgent(_0x37dfe0), _0xa0a161 = await _0x48aa0b(_0x184abb(0x20f), { 'agent': _0x199881, 'signal': AbortSignal[_0x184abb(0x215)](0x7530) }); if (!_0xa0a161['ok']) return { 'success': ![], 'error': _0x184abb(0x1db) + _0xa0a161[_0x184abb(0x20a)] }; const _0x1e6fed = await _0xa0a161['json'](), _0x4ea78e = Date[_0x184abb(0x209)]() - _0x1dbbbf; return { 'success': !![], 'latency': _0x4ea78e, 'ip': _0x1e6fed['ip'] }; } catch (_0x42cff9) { return { 'success': ![], 'error': _0x42cff9[_0x184abb(0x218)] }; } } export class ProxyPool { constructor(_0x55f394) { const _0x174fc1 = _0x580b8b; this['proxies'] = _0x55f394[_0x174fc1(0x21d)](_0x1aad59 => ({ 'url': normalizeProxy(_0x1aad59), 'busy': ![], 'usageCount': 0x0, 'blockCount': 0x0, 'blocked': ![] })), this[_0x174fc1(0x1df)] = [], this[_0x174fc1(0x1f2)] = _0x55f394[_0x174fc1(0x1ff)] === 0x0, this['MAX_BLOCK_COUNT'] = 0xa, this['noProxyBusy'] = ![], this['noProxyWaitQueue'] = []; } async[_0x580b8b(0x1fd)]() { const _0x15c4e7 = _0x580b8b; if (this['noProxyMode']) { if (!this['noProxyBusy']) return this[_0x15c4e7(0x207)] = !![], null; return new Promise(_0x64c673 => { this['noProxyWaitQueue']['push'](() => { const _0x1d7c31 = _0x1628; this[_0x1d7c31(0x207)] = !![], _0x64c673(null); }); }); } const _0x1330c7 = this[_0x15c4e7(0x208)][_0x15c4e7(0x211)](_0x2db4a6 => !_0x2db4a6['busy'] && !_0x2db4a6[_0x15c4e7(0x1ee)]); if (_0x1330c7) return _0x1330c7['busy'] = !![], _0x1330c7[_0x15c4e7(0x1e8)]++, _0x1330c7[_0x15c4e7(0x1fe)]; const _0x9e8fe7 = this[_0x15c4e7(0x208)][_0x15c4e7(0x21e)](_0x583bc0 => _0x583bc0[_0x15c4e7(0x1ee)]); if (_0x9e8fe7) throw new Error(_0x15c4e7(0x219)); return new Promise(_0x3f9f57 => { const _0x59e302 = _0x15c4e7; this[_0x59e302(0x1df)][_0x59e302(0x1fa)](_0x3f9f57); }); } [_0x580b8b(0x201)](_0x3fa833) { const _0x5b362c = _0x580b8b; if (this['noProxyMode']) { if (this[_0x5b362c(0x210)]['length'] > 0x0) { const _0x752f5 = this['noProxyWaitQueue'][_0x5b362c(0x1e5)](); _0x752f5(); } else this['noProxyBusy'] = ![]; return; } if (_0x3fa833 === null) return; const _0x2542d6 = this[_0x5b362c(0x208)][_0x5b362c(0x211)](_0x371ece => _0x371ece[_0x5b362c(0x1fe)] === _0x3fa833); if (!_0x2542d6) return; if (!_0x2542d6[_0x5b362c(0x1ee)] && this[_0x5b362c(0x1df)][_0x5b362c(0x1ff)] > 0x0) { const _0x7a113 = this[_0x5b362c(0x1df)][_0x5b362c(0x1e5)](); _0x2542d6[_0x5b362c(0x1e8)]++, _0x7a113(_0x2542d6[_0x5b362c(0x1fe)]); } else _0x2542d6[_0x5b362c(0x21c)] = ![]; } ['markBlocked'](_0x4f170c) { const _0x2b4f32 = _0x580b8b; if (this[_0x2b4f32(0x1f2)] || _0x4f170c === null) return ![]; const _0x301d05 = this['proxies']['find'](_0x28c667 => _0x28c667[_0x2b4f32(0x1fe)] === _0x4f170c); if (!_0x301d05) return ![]; _0x301d05[_0x2b4f32(0x1da)]++; if (_0x301d05['blockCount'] >= this[_0x2b4f32(0x202)]) return _0x301d05[_0x2b4f32(0x1ee)] = !![], _0x301d05[_0x2b4f32(0x21c)] = ![], !![]; return ![]; } [_0x580b8b(0x1f1)](_0x33badb) { const _0x488597 = _0x580b8b; if (this[_0x488597(0x1f2)] || _0x33badb === null) return; const _0x3698ab = this[_0x488597(0x208)][_0x488597(0x211)](_0xf78312 => _0xf78312['url'] === _0x33badb); _0x3698ab && !_0x3698ab[_0x488597(0x1ee)] && (_0x3698ab[_0x488597(0x1da)] = 0x0); } [_0x580b8b(0x213)](_0x651a4d) { const _0x557150 = _0x580b8b; if (this[_0x557150(0x1f2)] || _0x651a4d === null) return ![]; const _0x20dcdf = this[_0x557150(0x208)][_0x557150(0x211)](_0x3bc5d3 => _0x3bc5d3['url'] === _0x651a4d); return _0x20dcdf ? _0x20dcdf[_0x557150(0x1ee)] : ![]; } ['getBlockCount'](_0x356d36) { const _0x3874a4 = _0x580b8b; if (this[_0x3874a4(0x1f2)] || _0x356d36 === null) return 0x0; const _0x42e897 = this[_0x3874a4(0x208)][_0x3874a4(0x211)](_0x3e7538 => _0x3e7538[_0x3874a4(0x1fe)] === _0x356d36); return _0x42e897 ? _0x42e897[_0x3874a4(0x1da)] : 0x0; } [_0x580b8b(0x1f4)]() { const _0x59e0d6 = _0x580b8b; if (this[_0x59e0d6(0x1f2)]) return { 'total': 0x0, 'active': 0x0, 'idle': 0x0, 'blocked': 0x0, 'waiting': 0x0 }; const _0x5ac68e = this['proxies'][_0x59e0d6(0x20d)](_0x20f7f3 => _0x20f7f3[_0x59e0d6(0x21c)] && !_0x20f7f3[_0x59e0d6(0x1ee)])[_0x59e0d6(0x1ff)], _0x26ad04 = this[_0x59e0d6(0x208)][_0x59e0d6(0x20d)](_0x63849c => _0x63849c[_0x59e0d6(0x1ee)])['length']; return { 'total': this['proxies'][_0x59e0d6(0x1ff)], 'active': _0x5ac68e, 'idle': this['proxies']['length'] - _0x5ac68e - _0x26ad04, 'blocked': _0x26ad04, 'waiting': this[_0x59e0d6(0x1df)][_0x59e0d6(0x1ff)] }; } ['getConcurrency']() { const _0x561ff8 = _0x580b8b; if (this[_0x561ff8(0x1f2)]) return 0x1; const _0x4eb37b = this[_0x561ff8(0x208)]['filter'](_0x108a67 => !_0x108a67['blocked'])[_0x561ff8(0x1ff)]; return _0x4eb37b > 0x0 ? _0x4eb37b : 0x1; } } class ProxyManager { constructor() { const _0x43e261 = _0x580b8b; this['proxies'] = env['proxies'], this[_0x43e261(0x1ed)] = 0x0, this[_0x43e261(0x20c)] = new Map(); } [_0x580b8b(0x1d8)](_0x1ea64f) { return normalizeProxy(_0x1ea64f); } ['getProxyForAccount'](_0x507801) { const _0x1a7e55 = _0x580b8b; if (!this[_0x1a7e55(0x208)][_0x1a7e55(0x1ff)]) return null; if (!this[_0x1a7e55(0x20c)][_0x1a7e55(0x200)](_0x507801)) { const _0x53db6c = this['normalizeProxy'](this[_0x1a7e55(0x208)][this[_0x1a7e55(0x1ed)]]); this['accountProxies']['set'](_0x507801, _0x53db6c), this[_0x1a7e55(0x1ed)] = (this[_0x1a7e55(0x1ed)] + 0x1) % this['proxies'][_0x1a7e55(0x1ff)]; } return this[_0x1a7e55(0x20c)]['get'](_0x507801); } [_0x580b8b(0x1fc)](_0x538cc0) { const _0x28758d = _0x580b8b; if (!this['proxies']['length']) return null; const _0x13b391 = this[_0x28758d(0x1d8)](this[_0x28758d(0x208)][this[_0x28758d(0x1ed)]]); return this[_0x28758d(0x20c)][_0x28758d(0x1dd)](_0x538cc0, _0x13b391), this['proxyIndex'] = (this[_0x28758d(0x1ed)] + 0x1) % this[_0x28758d(0x208)][_0x28758d(0x1ff)], _0x13b391; } [_0x580b8b(0x1ef)](_0x446223) { return createProxyAgent(_0x446223); } async['checkConnection'](_0x497efd) { const _0x5e9a63 = _0x580b8b, _0x2abbea = await checkProxy(_0x497efd); return _0x2abbea[_0x5e9a63(0x20b)]; } async[_0x580b8b(0x1ea)](_0x5931f1) { const _0x3a2fa6 = _0x580b8b; if (!this['proxies'][_0x3a2fa6(0x1ff)]) return null; for (let _0x3ce8e2 = 0x0; _0x3ce8e2 < this[_0x3a2fa6(0x208)][_0x3a2fa6(0x1ff)]; _0x3ce8e2++) { const _0x24ec08 = this[_0x3a2fa6(0x205)](_0x5931f1); if (await this[_0x3a2fa6(0x21a)](_0x24ec08)) return _0x24ec08; this['rotateProxyForAccount'](_0x5931f1); } return null; } } export const proxyManager = new ProxyManager(); export { _0x48aa0b as fetch };